<!DOCTYPE html>
<html lang="{{ meta.mainLanguage }}">
  <head>
    <title>{% if title %}{{ title }}{% else %}{{ page.fileSlug }}{% endif %}</title>
    {% include "components/pageheader.njk" %}
    {% for imp in dynamics.common.head %}
      {% include imp %}
    {% endfor %}
    {% block head %}{% endblock %}
    <style>
      body.theme-light { background: #fff; color: #000; }
      body.theme-dark  { background: #111; color: #eee; }
      .theme-toggle {
        position: fixed; top: 1rem; right: 1rem;
        background: var(--bg, #ddd); padding: 0.5rem;
        cursor: pointer; border-radius: 8px;
      }
    </style>
  </head>
  <body class="theme-{{ meta.baseTheme }} {{ meta.bodyClasses }}">
    <button class="theme-toggle" onclick="toggleTheme()">ðŸŒ“</button>

    {% block content %}{% endblock %}

    <script>
      function toggleTheme() {
        const body = document.body;
        if (body.classList.contains("theme-dark")) {
          body.classList.remove("theme-dark");
          body.classList.add("theme-light");
          localStorage.setItem("theme", "light");
        } else {
          body.classList.remove("theme-light");
          body.classList.add("theme-dark");
          localStorage.setItem("theme", "dark");
        }
      }

      // Load saved theme
      (function() {
        const saved = localStorage.getItem("theme");
        if (saved) {
          document.body.classList.remove("theme-light", "theme-dark");
          document.body.classList.add("theme-" + saved);
        }
      })();
    </script>
  </body>
</html>
